<?php

/**
 * News.
 *
 * @copyright Michael Ueberschaer (MU)
 * @license http://www.gnu.org/licenses/lgpl.html GNU Lesser General Public License
 * @author Michael Ueberschaer <info@homepages-mit-zikula.de>.
 * @see https://homepages-mit-zikula.de
 * @see https://ziku.la
 * @version Generated by ModuleStudio (https://modulestudio.de).
 */

declare(strict_types=1);

namespace MU\NewsModule\Traits;

use Symfony\Component\Form\Extension\Core\Type\TextareaType;
use Symfony\Component\Form\FormBuilderInterface;
use Translation\Extractor\Annotation\Ignore;
use Translation\Extractor\Annotation\Translate;

/**
 * Workflow form fields trait.
 */
trait WorkflowFormFieldsTrait
{
    /**
     * Adds a field for additional notification remarks.
     */
    public function addAdditionalNotificationRemarksField(FormBuilderInterface $builder, array $options = []): void
    {
        $helpText = '';
        if ($options['is_moderator']) {
            $helpText = /** @Translate */'These remarks (like a reason for deny) are not stored, but added to any notification emails send to the creator.';
        } elseif ($options['is_creator']) {
            $helpText = /** @Translate */'These remarks (like questions about conformance) are not stored, but added to any notification emails send to our moderators.';
        }
    
        $builder->add('additionalNotificationRemarks', TextareaType::class, [
            'mapped' => false,
            'label' => 'Additional remarks',
            'label_attr' => [
                'class' => 'tooltips',
                /** @Ignore */
                'title' => $helpText
            ],
            'attr' => [
                'class' => 'noeditor',
                /** @Ignore */
                'title' => 'create' == $options['mode']
                    ? /** @Translate */'Enter any additions about your content'
                    : /** @Translate */'Enter any additions about your changes'
            ],
            'required' => false,
            'help' => $helpText
        ]);
    }
}
